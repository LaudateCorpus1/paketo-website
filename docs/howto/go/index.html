<!doctype html>
<html>

<head>
    <meta charset="utf-8">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PN39N8V');</script>

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>How to Build Go Apps with Paketo Buildpacks - Paketo Buildpacks</title>
<meta name="viewport" content="width=device-width, initial-scale=1">




<meta name="og:site_name" content="Paketo Buildpacks">
<meta name="og:title" content="How to Build Go Apps with Paketo Buildpacks">
<meta name="og:url" content="https://paketo.io/docs/howto/go/">
<meta name="twitter:title" content="Paketo Buildpacks" />
<meta name="twitter:url" content="https://paketo.io/docs/howto/go/" />
<meta name="twitter:card" content="" />
<link rel="stylesheet" href="/css/main-v1.min.11683961628fd5a8a634075ad9c453e01a683e10e52c7419150fca0ed6cbd1fe.css">
</head>

<body>
    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PN39N8V"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    

    



<header class="header ">
    <a class="paketo-logo" href="/">
        <img class="paketo-logo__image" src="/v2/images/logo-paketo-light.svg" alt="Paketo Buildpacks Homepage">
    </a>
    <div id="navigation" class="right-overlay">
        <div class="nav-opener">
            <span class="nav-opener__bar nav-opener__bar-top"></span>
            <span class="nav-opener__bar nav-opener__bar-middle"></span>
            <span class="nav-opener__bar nav-opener__bar-bottom"></span>
        </div>
        <div class="nav-container" id="nav-container">
            <nav class="nav" id="nav-tray" >
                <div class="nav__linkarea">
                    <a class="nav-link " href="/docs">docs</a>
                    <a class="nav-link " href="/contribute">community</a>
                    <a class="nav-link " href="https://blog.paketo.io">blog</a>
                    <a class="nav-link " href="https://github.com/paketo-buildpacks">github</a>
                </div>
            </nav>
        </div>
    </div>
    <div class="desktop-nav">
        <a class="nav-link " href="/docs">docs</a>
        <a class="nav-link " href="/contribute">community</a>
        <a class="nav-link " href="https://blog.paketo.io">blog</a>
        <a class="nav-link " href="https://github.com/paketo-buildpacks">github</a>
    </div>
</header>


    <div class="docs">
    <div class="docs-sidebar">
        
<nav class="docs-menu">
    <h4 class="docs-menu__title">PAKETO DOCS</h4>
    <ul class="docs-menu__top-level-list">
        
        
            
    
        <li class="docs-menu__leaf">
            <a href="/docs/" class="docs-menu__link ">
                
                <span>Getting Started</span>
            </a>
        </li>
    
        
            
    
        <li class="docs-menu__parent">
            <a href=""  class="docs-menu__link ">
                
                <span>How To</span>
            </a>
            <ul class="docs-menu__children-list">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/dotnet-core/" class="docs-menu__link ">
                
                <span>.Net Core</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/go/" class="docs-menu__link docs-menu__link--active">
                
                <span>Go</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/httpd/" class="docs-menu__link ">
                
                <span>HTTPD</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/java-native-image/" class="docs-menu__link ">
                
                <span>Java Native Image</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/java/" class="docs-menu__link ">
                
                <span>Java</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/nginx/" class="docs-menu__link ">
                
                <span>NGINX</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/nodejs/" class="docs-menu__link ">
                
                <span>Node.js</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/php/" class="docs-menu__link ">
                
                <span>PHP</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/ruby/" class="docs-menu__link ">
                
                <span>Ruby</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/create-paketo-buildpack/" class="docs-menu__link ">
                
                <span>Create a Paketo Buildpack</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
            
    
        <li class="docs-menu__parent">
            <a href=""  class="docs-menu__link ">
                
                <span>Concepts</span>
            </a>
            <ul class="docs-menu__children-list">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/buildpacks/" class="docs-menu__link ">
                
                <span>Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/builders/" class="docs-menu__link ">
                
                <span>Builders</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/stacks/" class="docs-menu__link ">
                
                <span>Stacks</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
            
    
        <li class="docs-menu__parent">
            <a href=""  class="docs-menu__link ">
                
                <span>Reference</span>
            </a>
            <ul class="docs-menu__children-list">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/configuration/" class="docs-menu__link ">
                
                <span>Configuring Paketo Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/go-reference/" class="docs-menu__link ">
                
                <span>Go Buildpack</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
    </ul>
</nav>



    </div>
    <div class="docs-body">
        <div class="docs-body__container">
            





  <a href="http://github.com/paketo-buildpacks/paketo-website/edit/main/content/%25!s%28%3cnil%3e%29" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <h1 class="">How to Build Go Apps with Paketo Buildpacks</h1>
            <div class="docs-body__table-of-contents docs-body__table-of-contents--mobile">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#build-a-sample-go-application">Build a Sample Go Application</a></li>
    <li><a href="#install-a-specific-go-version">Install a Specific Go Version</a>
      <ul>
        <li><a href="#using-bp_go_version">Using BP_GO_VERSION</a></li>
        <li><a href="#deprecated-using-buildpackyml">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#configure-the-go-build-command">Configure the <code>go build</code> Command</a>
      <ul>
        <li><a href="#bp_go_build_flags">BP_GO_BUILD_FLAGS</a></li>
        <li><a href="#bp_go_build_ldflags">BP_GO_BUILD_LDFLAGS</a></li>
        <li><a href="#deprecated-using-buildpackyml-1">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#build-multiple-binaries-in-an-app-image">Build Multiple Binaries In An App Image</a>
      <ul>
        <li><a href="#deprecated-using-buildpackyml-2">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#configure-module-import-paths">Configure Module Import Paths</a>
      <ul>
        <li><a href="#deprecated-using-buildpackyml-3">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#keep-specific-files-in-the-app-image">Keep Specific Files in the App Image</a></li>
    <li><a href="#install-a-custom-ca-certificate">Install a Custom CA Certificate</a></li>
    <li><a href="#override-the-start-process-set-by-the-buildpack">Override the Start Process Set by the Buildpack</a></li>
    <li><a href="#set-environment-variables-for-app-launch-time">Set Environment Variables for App Launch Time</a></li>
    <li><a href="#add-custom-labels-to-the-app-image">Add Custom Labels to the App Image</a></li>
  </ul>
</nav>
</div>
            
            
            <div class="docs-body__markdown">
                <h2 id="build-a-sample-go-application" class="markup-heading"><a class="markup-heading__link" href="#build-a-sample-go-application">Build a Sample Go Application</a></h2><p>To build a sample app locally with this buildpack using the <code>pack</code> CLI, run</p>
<pre class="copyable"><code class="copyable__code">git clone https://github.com/paketo-buildpacks/samples
cd samples/go/mod
pack build my-app --buildpack gcr.io/paketo-buildpacks/go \
  --builder paketobuildpacks/builder:base
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<p>See <a href="https://github.com/paketo-buildpacks/samples/tree/main/go/mod">samples</a>
for how to run the app.</p>
<p><strong>NOTE: Though the example above uses the Paketo Base builder, this buildpack is
also compatible with the Paketo Full builder and Paketo Tiny builder.</strong></p>
<h2 id="install-a-specific-go-version" class="markup-heading"><a class="markup-heading__link" href="#install-a-specific-go-version">Install a Specific Go Version</a></h2><p>The Go CNB (Cloud Native Buildpack) allows you to specify a version of Go to
use during deployment. This version can be specified via the <code>BP_GO_VERSION</code>
environment variable or <code>go.mod</code>. When specifying a version of Go, you must
choose a version that is available within the buildpack. The supported versions
can be found
<a href="https://github.com/paketo-buildpacks/go-dist/releases/latest">here</a>.</p>
<p>Please note that setting the Go version through a buildpack.yml file will be
deprecated in Go Dist Buildpack v1.0.0.</p>
<p>The buildpack prioritizes the versions specified in
each possible configuration location with the following precedence, from
highest to lowest: <code>BP_GO_VERSION</code>, <code>go.mod</code>.</p>
<p>Specifying a version of Go is not required. In the case that is not specified,
the buildpack will provide the default version, which can be seen in the
<code>buildpack.toml</code> file.</p>
<h3 id="using-bp_go_version" class="markup-heading"><a class="markup-heading__link" href="#using-bp_go_version">Using BP_GO_VERSION</a></h3><p>To configure the buildpack to use Go v1.14.6 when deploying your app, set the
following environment variable at build time, either directly (ex. <code>pack build my-app --env BP_GO_VERSION=1.14.6</code>) or through a
<a href="https://github.com/buildpacks/spec/blob/main/extensions/project-descriptor.md">project.toml</a>
file:</p>
<pre class="copyable"><code class="copyable__code">BP_GO_VERSION=&#34;1.14.6&#34;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h3 id="deprecated-using-buildpackyml" class="markup-heading"><a class="markup-heading__link" href="#deprecated-using-buildpackyml">Deprecated: Using buildpack.yml</a></h3><p>Specifying the Go version through buildpack.yml configuration will be
deprecated in Go Dist Buildpack v1.0.0. To migrate from using buildpack.yml
please set the<code> $BP_GO_VERSION</code> environment variable.</p>
<h2 id="configure-the-go-build-command" class="markup-heading"><a class="markup-heading__link" href="#configure-the-go-build-command">Configure the <code>go build</code> Command</a></h2><p>The <code>go build</code> command supports a number of flags that allow users to override
defaults for more control over build configurations. By default, the buildpack
sets the following build flags:</p>
<ul>
<li><code>-buildmode=pie</code></li>
<li><code>-mod=vendor</code> (if there is a go.mod file in the app source code)</li>
</ul>
<h3 id="bp_go_build_flags" class="markup-heading"><a class="markup-heading__link" href="#bp_go_build_flags">BP_GO_BUILD_FLAGS</a></h3><p>To set custom values for your build flags or override the defaults, assign a
list of flags to the <code>BP_GO_BUILD_FLAGS</code> environment variable at build time, either directly (ex. <code>pack build my-app --env BP_GO_BUILD_FLAGS=&quot;-buildmode=some-build-mode -tags=paketo,production&quot;</code>) or through a
<a href="https://github.com/buildpacks/spec/blob/main/extensions/project-descriptor.md">project.toml</a>
file:</p>
<pre class="copyable"><code class="copyable__code">[[ build.env ]]
  name = &#39;BP_GO_BUILD_FLAGS&#39;
  value = &#39;-buildmode=some-build-mode -tags=paketo,production&#39;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h3 id="bp_go_build_ldflags" class="markup-heading"><a class="markup-heading__link" href="#bp_go_build_ldflags">BP_GO_BUILD_LDFLAGS</a></h3><p>The Go CNB also allows users to configure the value of <code>-ldflags</code> for the <code>go build</code>
command by setting the <code>BP_GO_BUILD_LDFLAGS</code> environment variable at build time, either directly (ex. <code>pack build my-app --env BP_GO_BUILD_LDFLAGS=&quot;-X main.variable=some-value&quot;</code>) or through a
<a href="https://github.com/buildpacks/spec/blob/main/extensions/project-descriptor.md">project.toml</a>
file:</p>
<pre class="copyable"><code class="copyable__code">[[ build.env ]]
  name = &#39;BP_GO_BUILD_LDFLAGS&#39;
  value = &#39;-X main.variable=some-value&#39;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h3 id="deprecated-using-buildpackyml-1" class="markup-heading"><a class="markup-heading__link" href="#deprecated-using-buildpackyml-1">Deprecated: Using buildpack.yml</a></h3><p>Specifying the Go Build flags through buildpack.yml configuration will be
deprecated in Go Build Buildpack v1.0.0. To migrate from using buildpack.yml
please set the <code>$BP_GO_BUILD_FLAGS</code> environment variable.</p>
<h2 id="build-multiple-binaries-in-an-app-image" class="markup-heading"><a class="markup-heading__link" href="#build-multiple-binaries-in-an-app-image">Build Multiple Binaries In An App Image</a></h2><p>The Go CNB allows users to specify multiple targets for <code>go build</code>. This will
result in multiples binaries being built.Targets must be a list of paths
relative to the root directory of the source code.</p>
<p>To set custom targets for your build assign a list of targets to the
<code>BP_GO_TARGETS</code> environment variable as shown below:</p>
<pre class="copyable"><code class="copyable__code">BP_GO_TARGETS=./some-target:./other-target
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h3 id="deprecated-using-buildpackyml-2" class="markup-heading"><a class="markup-heading__link" href="#deprecated-using-buildpackyml-2">Deprecated: Using buildpack.yml</a></h3><p>Specifying the Go Build targets through buildpack.yml configuration will be
deprecated in Go Build Buildpack v1.0.0. To migrate from using buildpack.yml
please set the <code>$BP_GO_TARGETS</code> environment variable.</p>
<h2 id="configure-module-import-paths" class="markup-heading"><a class="markup-heading__link" href="#configure-module-import-paths">Configure Module Import Paths</a></h2><p>If you are building a $GOPATH application that imports its own sub-packages,
you will need to specify the import paths for those sub-packages. The Go CNB
supports setting these import paths via the <code>$BP_GO_BUILD_IMPORT_PATH</code>
environment variable:</p>
<pre class="copyable"><code class="copyable__code">BP_GO_BUILD_IMPORT_PATH=example.com/some-app
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h3 id="deprecated-using-buildpackyml-3" class="markup-heading"><a class="markup-heading__link" href="#deprecated-using-buildpackyml-3">Deprecated: Using buildpack.yml</a></h3><p>Specifying the Go Build import path through buildpack.yml configuration will be
deprecated in Go Build Buildpack v1.0.0. To migrate from using buildpack.yml
please set the <code>$BP_GO_BUILD_IMPORT_PATH</code> environment variable.</p>
<h2 id="keep-specific-files-in-the-app-image" class="markup-heading"><a class="markup-heading__link" href="#keep-specific-files-in-the-app-image">Keep Specific Files in the App Image</a></h2><p>The Go CNB by defaults deletes the contents of your app root once it has
compiled your app in an effort to optimize the size the final image. However
sometimes there are static assets that you would like to appear in the final
image. To have these files or directories persist set the <code>BP_KEEP_FILES</code>
environment variable, which can be passed to <code>pack build</code>:
<pre class="copyable"><code class="copyable__code">BP_KEEP_FILES=assets/*:public/*
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h2 id="install-a-custom-ca-certificate" class="markup-heading"><a class="markup-heading__link" href="#install-a-custom-ca-certificate">Install a Custom CA Certificate</a></h2><p>Go Buildpack users can provide their own CA certificates and have them
included in the container root truststore at build-time and runtime by
following the instructions outlined in the <a href="https://paketo.io/docs/buildpacks/configuration/#ca-certificates">CA
Certificates</a>
section of our configuration docs.</p>
<h2 id="override-the-start-process-set-by-the-buildpack" class="markup-heading"><a class="markup-heading__link" href="#override-the-start-process-set-by-the-buildpack">Override the Start Process Set by the Buildpack</a></h2><p>Go Buildpack users can set custom start processes for their app image by
following the instructions in the
<a href="https://paketo.io/docs/buildpacks/configuration/#procfiles">Procfiles</a> section
of our configuration docs.</p>
<h2 id="set-environment-variables-for-app-launch-time" class="markup-heading"><a class="markup-heading__link" href="#set-environment-variables-for-app-launch-time">Set Environment Variables for App Launch Time</a></h2><p>Go Buildpack users can embed launch-time environment variables in their
app image by following the documentation for the <a href="https://github.com/paketo-buildpacks/environment-variables/blob/main/README.md">Environment Variables
Buildpack</a>.</p>
<h2 id="add-custom-labels-to-the-app-image" class="markup-heading"><a class="markup-heading__link" href="#add-custom-labels-to-the-app-image">Add Custom Labels to the App Image</a></h2><p>Go Buildpack users can add labels to their app image by following the
instructions in the <a href="https://paketo.io/docs/buildpacks/configuration/#applying-custom-labels">Applying Custom
Labels</a>
section of our configuration docs.</p>

            </div>
            





  <a href="http://github.com/paketo-buildpacks/paketo-website/edit/main/content/docs/howto/go.md" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <p class="docs-mod-time"><strong>Last modified:</strong> July 8, 2021</p>
        </div>
        <div class="docs-body__table-of-contents-container">
            <div class="docs-body__table-of-contents docs-body__table-of-contents--desktop">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#build-a-sample-go-application">Build a Sample Go Application</a></li>
    <li><a href="#install-a-specific-go-version">Install a Specific Go Version</a>
      <ul>
        <li><a href="#using-bp_go_version">Using BP_GO_VERSION</a></li>
        <li><a href="#deprecated-using-buildpackyml">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#configure-the-go-build-command">Configure the <code>go build</code> Command</a>
      <ul>
        <li><a href="#bp_go_build_flags">BP_GO_BUILD_FLAGS</a></li>
        <li><a href="#bp_go_build_ldflags">BP_GO_BUILD_LDFLAGS</a></li>
        <li><a href="#deprecated-using-buildpackyml-1">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#build-multiple-binaries-in-an-app-image">Build Multiple Binaries In An App Image</a>
      <ul>
        <li><a href="#deprecated-using-buildpackyml-2">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#configure-module-import-paths">Configure Module Import Paths</a>
      <ul>
        <li><a href="#deprecated-using-buildpackyml-3">Deprecated: Using buildpack.yml</a></li>
      </ul>
    </li>
    <li><a href="#keep-specific-files-in-the-app-image">Keep Specific Files in the App Image</a></li>
    <li><a href="#install-a-custom-ca-certificate">Install a Custom CA Certificate</a></li>
    <li><a href="#override-the-start-process-set-by-the-buildpack">Override the Start Process Set by the Buildpack</a></li>
    <li><a href="#set-environment-variables-for-app-launch-time">Set Environment Variables for App Launch Time</a></li>
    <li><a href="#add-custom-labels-to-the-app-image">Add Custom Labels to the App Image</a></li>
  </ul>
</nav>
</div>
        </div>
    </div>
</div>


    <footer class="footer text--light">
    <div class="footer-social-links-container">
        <a class="footer-social-link" href="https://twitter.com/Paketo_io">
            <div class="footer-social-link__image-container">
                <img class="footer-social-link__image-container__image" src="/v2/images/logo-twitter.svg" alt="Blue Twitter bird logo"/>
            </div>
            <div class="text--light">
                Twitter
            </div>
        </a>
        <a class="footer-social-link" href="https://slack.paketo.io/">
            <div class="footer-social-link__image-container">
                <img class="footer-social-link__image-container__image" src="/v2/images/logo-slack.svg" alt="Slack logo"/>
            </div>
            <div class="text--light">
                Slack
            </div>
        </a>
        <a class="footer-social-link" href="https://github.com/paketo-buildpacks">
            <div class="footer-social-link__image-container">
                <img src="/v2/images/logo-github.svg" alt="GitHub Octocat logo"/>
            </div>
            <div class="text--light">
                GitHub
            </div>
        </a>
    </div>
    <div class="footer-privacy-policy">
        <div class="footer-text--small">Paketo Buildpacks is a <a class="text--light" href="https://www.cloudfoundry.org/">Cloud Foundry</a> Project</div>
        <img class="cloudfoundry-logo" src="/v2/images/logo-cloudfoundry-light.svg" alt="Cloud Foundry logo" />
        <a class="footer-text--small text--light" href="https://www.linuxfoundation.org/privacy">Privacy Policy</a>
    </div>
</footer><script src="/js/main.bdf8c7d2f9a1646cf0a78c52a0a869a3323a3f810afca6042260f94774f4b9fe.js"></script>


</body>

</html>
